<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Agriculture Advisor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="dark-mode">
    <div class="app-container">
        <aside class="sidebar" id="sidebar">
            <header class="sidebar-header">
                <button class="sidebar-toggle" id="sidebar-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </button>
                <h1 class="app-title">AI Advisor</h1>
            </header>
            
            <a href="{{ url_for('new_chat') }}" class="new-chat-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                </svg>
                New Chat
            </a>

            <div class="language-selector">
                <span class="selector-label">select language</span>
                <select id="language-select" class="language-dropdown">
                    <option value="en">English</option>
                    <option value="yo">Yoruba</option>
                </select>
            </div>
            
            <div class="history-list">
                <span class="history-label">Recent</span>
                {% for session in sessions %}
                <a href="{{ url_for('index', session_id=session.id) }}" class="history-item {{ 'active' if session.id == current_session.id }}">
                    {{ session.title }}
                </a>
                {% endfor %}
            </div>

            <footer class="sidebar-footer">
                <div class="user-info">
                    <div class="avatar-placeholder"></div>
                    <span class="login-as">login as:</span>
                    <strong class="user-email">{{ current_user.email }}</strong>
                </div>
                <div class="action-buttons">
                    <button id="theme-toggle" class="control-button">ðŸŒ™</button>
                    <a href="{{ url_for('logout') }}" class="control-button">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17 7l-1.41 1.41L18.17 11H9v2h9.17l-2.58 2.58L17 17l5-5-5-5zm-6 4H2v2h9v-2zm-2-4H2v2h7V7zM2 17h9v-2H2v2z"/>
                        </svg>
                    </a>
                </div>
            </footer>
        </aside>
        
        <div class="chat-main">
            <header class="chat-header">
                <button class="sidebar-toggle chat-header-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </button>
                <div class="chat-header-actions">
                    <button class="control-button">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.94 11c-.48-4.41-4.09-7.94-8.54-8.4L12 2c-5.52 0-10 4.48-10 10s4.48 10 10 10c.05 0 .09 0 .14-.01.32.01.64.01.96 0 .42-.01.83-.05 1.25-.1.4-.04.8-.08 1.2-.14.28-.05.57-.1.85-.16.29-.07.57-.15.86-.24.32-.09.63-.2.95-.3.62-.19 1.23-.42 1.84-.68.17-.07.34-.14.51-.22.46-.22.92-.47 1.37-.75.44-.28.87-.58 1.29-.9.43-.32.85-.66 1.25-1.02.4-.36.79-.74 1.16-1.14.37-.4.73-.82 1.08-1.25.35-.43.69-.87 1.02-1.33.16-.22.31-.44.46-.67.14-.23.28-.47.41-.7.13-.24.25-.48.37-.73.12-.25.23-.5.33-.76.09-.26.18-.52.26-.79.08-.26.15-.53.22-.8.06-.27.12-.54.17-.82.04-.28.09-.56.12-.84.03-.28.06-.57.08-.85.02-.28.03-.57.04-.85.01-.28.01-.57.01-.85l-.01-.85zm-8.94 9.17c-.36-.08-.71-.16-1.07-.24-2.82-.6-5.06-2.84-5.66-5.66l-.24-1.07-1.07.24c-.6.12-1.2.24-1.8.36-.6.12-1.2.24-1.8.36-1.8.36-3.6.72-5.4 1.08l-1.07.24zm8.94 9.17c-.36-.08-.71-.16-1.07-.24-2.82-.6-5.06-2.84-5.66-5.66l-.24-1.07-1.07.24c-.6.12-1.2.24-1.8.36-.6.12-1.2.24-1.8.36-1.8.36-3.6.72-5.4 1.08l-1.07.24z"/>
                        </svg>
                    </button>
                    <button class="control-button">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-12h2v6h-2zm0 8h2v2h-2z"/>
                        </svg>
                    </button>
                    <button class="control-button">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-12h2v6h-2zm0 8h2v2h-2z"/>
                        </svg>
                    </button>
                </div>
            </header>
            
            <div class="chat-history" id="chat-history">
                <div class="message-container system-message-container">
                    <div class="message system-message">
                        Hello! I am an AI Agriculture Advisor. How can I help you with your farming today?
                    </div>
                </div>
            </div>
    
            <div class="chat-input-area">
                <form id="chat-form" class="chat-form">
                    <input type="hidden" id="session-id" value="{{ current_session.id }}">
                    <textarea id="user-input" class="user-input" placeholder="Type your message..." rows="1" required></textarea>
                    
                    <button type="button" id="upload-image-button" class="chat-button">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                    <polyline points="21 15 16 10 5 21"></polyline>
                    <line x1="12" y1="18" x2="12" y2="12"></line>
                    <line x1="9" y1="15" x2="15" y2="15"></line>
                    </svg>
                    </button>
                    <input type="file" id="image-input" accept="image/*" style="display:none;">
                    
                    <button type="button" id="speech-toggle" class="chat-button mic-button">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3.53-2.64 6.4-6.07 6.74V21h-2.01v-3.26C6.35 17.4 3.71 14.53 3.71 11H2c0 3.98 3.52 7.23 8 7.95V21h4v-2.05c4.48-.72 8-3.97 8-7.95h-1.7zm-6.19 1.76c-1.78 0-3.22-1.44-3.22-3.22V5.78c0-1.78 1.44-3.22 3.22-3.22s3.22 1.44 3.22 3.22v3.76c0 1.78-1.44 3.22-3.22 3.22z"/>
                        </svg>
                    </button>
                    
                    <button type="submit" class="chat-button send-button">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                        </svg>
                    </button>
                </form>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>